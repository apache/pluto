<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright 2004 The Apache Software Foundation
Licensed  under the  Apache License,  Version 2.0  (the "License");
you may not use  this file  except in  compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed  under the  License is distributed on an "AS IS" BASIS,
WITHOUT  WARRANTIES OR CONDITIONS  OF ANY KIND, either  express  or
implied.

See the License for the specific language governing permissions and
limitations under the License.
-->

<document>
  
  <properties>
    <title>Getting Started With Pluto</title>
    <author email="ddewolf@apache.org">David DeWolf</author>
    <author email="zheng.at.apache.D0T.org">ZHENG Zhong</author>
  </properties>
  
  <body>
    
    <section name="Installing Pluto">
      
      <p>
        Maven2 is utilized as the project management and build system for
        Pluto 1.1. Pluto currently provides Maven plugins which can be used to
        install the Pluto Portal, assemble portlet applications, deploy
        applications, and publish portlet applications to the to Pluto Portal.
      </p>
      
      <subsection name="Installing Pluto with Maven 2">
        <p>
          <code>&lt;PLUTO-1.1-HOME&gt;</code> is the local directory where the
          Pluto 1.1 source distribution is located.
        </p>
        <p>
          <source><![CDATA[
$> cd <PLUTO-1.1-HOME>
$> mvn install
$> mvn pluto:install -DinstallDir=path/to/appserver
          ]]></source>
        </p>
        <p>
          The <code>install</code> goal is a built in Maven 2 lifecycle
          which builds the project artifacts and installs them into the Maven
          repository.
        </p>
        <p>
          The <code>pluto:install</code> goal will take the resulting artifacts
          and properly deploy them within the configured tomcat installation.
        </p>
      </subsection>
      
      <subsection name="Installing Pluto Manually">
        <p>
          <b>Step 1:</b>
          <source><![CDATA[
$> cd <PLUTO-1.1-HOME>
$> mvn install
          ]]></source>
        </p>
        <p>
          <b>Step 2:</b> Copy the following to
          <code>&lt;TOMCAT_HOME&gt;/shared/lib</code>:
          <ul>
            <li>castor-0.9.6.jar</li>
            <li>portlet-api-1.0.jar</li>
            <li>pluto-container-1.1-SNAPSHOT.jar</li>
            <li>pluto-descriptor-api-1.1-SNAPSHOT.jar</li>
            <li>pluto-descriptor-impl-1.1-SNAPSHOT.jar</li>
            <li>pluto-taglib-1.1.0-SNAPSHOT.jar</li>
          </ul>
        </p>
        <p>
          <b>Step 3:</b> Copy the following to
          <code>&lt;TOMCAT_HOME&gt;/common/endorsed</code>:
          <ul>
            <li>xercesImpl-2.6.2.jar</li>
            <li>xmlParserAPIs-2.6.2.jar</li>
          </ul>
        </p>
        <p>
          <b>Step 4:</b> Copy the following to
          <code>&lt;TOMCAT_HOME&gt;/conf/Catalina/localhost</code>:
          <ul>
            <li>&lt;PLUTO_HOME&gt;/pluto-portal/src/main/resources/pluto.xml</li>
            <li>&lt;PLUTO_HOME&gt;/pluto-testsuite/src/main/resources/testsuite.xml</li>
          </ul>
        </p>
        <p>
          <b>Step 5:</b> Copy the following to
          <code>&lt;TOMCAT_HOME&gt;/webapps</code>:
          <ul>
            <li>&lt;PLUTO_HOME&gt;/pluto-portal/target/pluto-portal.war</li>
            <li>&lt;PLUTO_HOME&gt;/pluto-testsuite/target/pluto-testsuite.war</li>
          </ul>
        </p>
      </subsection>
      
      <subsection name="Installing Pluto with a Windows EXE">
        <p>
          The NSIS Installer is not yet complete, but we hope to have a fully
          functional one soon.  Anyone is more than welcome to assist us in
          this process.
        </p>
      </subsection>
      
    </section>
    <section name="Configuring Pluto for Application Scope PortletSession Attributes">
    <p>To be able to use application-scoped <code>PortletSession</code> attributes in Pluto, modify
    the Connector element for port 8080 in <code>&lt;TOMCAT_HOME&gt;/conf/server.xml</code> by
    adding the following attribute and value: emptySessionPath="true".
    </p>
    </section>    
    <section name="Configuring User and Role for Pluto">
      <p>
        The Pluto Testsuite portlet application needs the role '<code>pluto</code>'
        to run the Security Mapping Test. So before starting tomcat, you should
        edit <code>&lt;TOMCAT_HOME&gt;/conf/tomcat-users.xml</code>, add the
        role '<code>pluto</code>', and add a user in that role. The simplest way
        to do this is to edit add the '<code>pluto</code>' role to the
        '<code>tomcat</code>' user's record. Here is a sample
        <code>tomcat-users.xml</code> file:
        <source><![CDATA[
<?xml version="1.0" encoding="utf-8"?>
<tomcat-users>
  <role rolename="pluto"/>
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat,pluto"/>
  <user username="role1" password="tomcat" roles="role1"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
</tomcat-users>
        ]]></source>
      </p>
    </section>
    
    
    <section name="Starting the Portal">
      <p>
        Now you are ready to use Pluto Portal. Start up tomcat by running
        <code>startup.bat</code> (for windows) or <code>startup.sh</code> (for
        *nix) in <code>&lt;TOMCAT_HOME&gt;/bin</code>, and browse to
        <code>http://localhost:8080/pluto/portal</code>. Login to Pluto using
        the user and password you just created in <code>tomcat-users.xml</code>.
        If you added the 'pluto' role to the 'tomcat' user's record, you can
        login as 'tomcat/tomcat'.
      </p>
    </section>
    
  </body>
  
</document>

