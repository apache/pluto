<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
        "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <!-- The DriverConfiguration Bean.  This is the only bean required -->
    <bean id="DriverConfiguration"
          class="org.apache.pluto.driver.config.impl.DriverConfigurationImpl">
      <constructor-arg><ref local="PropertyConfigService"/></constructor-arg>
      <constructor-arg><ref local="PortletRegistryConfig"/></constructor-arg>
      <constructor-arg><ref local="RenderConfigService"/></constructor-arg>

      <!-- Container Services -->
      <constructor-arg><ref local="PortalCallbackService"/></constructor-arg>
      <constructor-arg><ref local="PortletPreferencesService"/></constructor-arg>
    </bean>

    <bean id="PropertyConfigService"
          class="org.apache.pluto.driver.services.impl.resource.PropertyConfigServiceImpl"
          singleton="true">
    </bean>

    <!--
    <bean name="PortletRegistryService"
          class="org.apache.pluto.driver.services.impl.resource.PortletRegistryServiceImpl
          singleton="true">
    </bean>
    -->

    <bean id="PortletRegistryConfig"
          class="org.apache.pluto.driver.services.impl.db.DBPortletRegistryService"
          singleton="true">
        <constructor-arg><ref bean="DataSourceManager"/></constructor-arg>
    </bean>

    <bean id="RenderConfigService"
          class="org.apache.pluto.driver.services.impl.resource.RenderConfigServiceImpl"
          singleton="true">
    </bean>


    <!-- Container Services -->
    <bean id="PortalCallbackService"
          class="org.apache.pluto.driver.services.container.PortalCallbackServiceImpl"
          singleton="true">
    </bean>

    <!--
    <bean name="PortletPreferencesService"
          class="org.apache.pluto.driver.services.container.memory.MemoryPreferencesService"
          singleton="true">
    </bean>
    -->

    <!-- Uncomment for Embedded Derby Service Implementations -->
    <bean id="PortletPreferencesService"
          class="org.apache.pluto.optional.db.DBPortletPreferencesService"
          singleton="true">
        <constructor-arg><ref bean="DataSourceManager"/></constructor-arg>
    </bean>

    <bean id="DataSourceManager"
          class="org.apache.pluto.optional.db.support.EmbeddedDataSourceManager"
          singleton="true">
   </bean>

    <!-- Uncomment to utilize a JNDI bound DataSource instead of
         the embedded database datasource.  You must ensure that
         the schema is created before startup if you wish to use
         this DataSourceManager
    -->
    <!--
    <bean name="DataSourceManager"
          class="org.apache.pluto.optional.db.support.JNDIDataSourceManager"
          singleton="true">
        <constructor-arg><value>plutoDB</value></constructor-arg>
    </bean>
    -->
</beans>