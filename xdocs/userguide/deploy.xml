<?xml version="1.0"?>
<!--
Copyright 2004 The Apache Software Foundation
Licensed  under the  Apache License,  Version 2.0  (the "License");
you may not use  this file  except in  compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed  under the  License is distributed on an "AS IS" BASIS,
WITHOUT  WARRANTIES OR CONDITIONS  OF ANY KIND, either  express  or
implied.

See the License for the specific language governing permissions and
limitations under the License.
-->
<document>
  <properties>
  <author email="ddewolf.AT.apache.D0T.org">David H. DeWolf</author>
  <title>Pluto User Guide: Deploy</title>
</properties>

<body>
<section name="Understanding Pluto Deployments">
<p>
  Deployment is the process which a compliant portlet application is
  configured and migrated to the environment in which it can be 
  serviced by the portlet container. Deployment of portlets into
  the pluto portlet container involves three steps.

</p>

<p align="center">
  <img src="../images/deployment.png" align="center"/>
</p>

<p>
  <h4>Step 1: Portlet Applicaiton Assembly</h4>
  Assembly is the process in which a compliant portlet application
  is modified to contain Pluto specific configuration.  This 
  configuration allows Pluto to service the portlets.  Specifically,
  Pluto adds two servlet definitions and associated mappings. The
  configured servlets are used to dispatch portlet requests to the
  portlet application from the portal.
</p>

<p>
  <h4>Step 2: Portlet Application Deployment</h4>
  Deployment is the process in which an assembled portlet application
  is migrated to the servlet container.  Deployment makes the portlet
  application available and once complete and requests will be serviced.
</p>

<p>
  <h4>Step 4: Portal Configuration</h4>
  Configuration is the process in which the Portal is made aware of the
  newly deployed application.  Until this configuration changes are made,
  the Portal is unaware of the portlet application and will not allow the 
  the portlet to be included on any of it's pages.
</p>
</section>

<section name="Automated Deployments">
<p>
  Currently the first two steps of the Deployment process are automated
  and can be completed by using one of three mechanisms: maven plugins, 
  ant tasks, or shell scripts. Currently, the final step must be 
  manually completed (any patches to automate this process are more
  than welcome!).
</p>

  <subsection name="Maven Deployments">
  <p>
    To date, the easiest way to deploy a custom portlet application 
    is to use maven.  The pluto deployer contains maven plugins 
    which allow for it to be executed just like the maven war goal.  
    The plugin is automatically installed whenever the deploy-all 
    goal is run from the source distribution.  To install the plugin
    manually, do the following:

    <p><h4>Manually Installing the Maven Pluto Deployer</h4>
    <ul><li>From &lt;PLUTO_HOME&gt; change directories
            to the deploy directory deploy by executing:
            <code>cd deploy</code></li>
        <li>Execute the maven "<code>plugin:install</code>" goal.</li>
    </ul>
    </p>
  </p>

  <p>
    Once installed, you may assemble portlets in any maven
    project by using the 'pluto:assemble' goal, and deploy
    portlets in any maven project by using the 'pluto:deploy'
    goal (The deploy goal will ensure that your portlets are
    assembled properly - there's no need to do both).
  </p>

  <p>
    The plugin supports the following properties:
  <table>
  <tr><th>Property</th> 
      <th>Description</th>
      <th>Default Value</th></tr>
  <tr><td><code>maven.pluto.deployer</code></td>
      <td>Fully qualified class name of the Deployer which should be used.</td>
      <td><code>org.apache.pluto.deploy.impl.Tomcat5FileSystemDeployer</code></td></tr>
  </table>
  </p>

  <p>
    The following properties are available when using the Tomcat4FileSystemDeployer
    or the Tomcat5FileSystemDeployer.
  <table>
  <tr><th>Property</th> 
      <th>Description</th>
      <th>Default Value</th>
      <th>Required</th></tr>
  <tr><td><code>tomcat.home</code> (or <code>maven.tomcat.home</code>)</td>
      <td>Location of the tomcat installation</td>
      <td> </td>
      <td>Yes</td></tr>
  <tr><td><code>tomcat.host</code> (or <code>maven.tomcat.host</code>)</td>
      <td>the name of the tomcat host to deploy to</td>
      <td><code>localhost</code></td>
      <td>No</td></tr>
  <tr><td><code>tomcat.service</code> (or <code>maven.tomcat.service</code>)</td>
      <td>The name of the tomcat service to deploy to</td>
      <td><code>Catalina</code></td>
      <td>No</td></tr>
  </table>
  </p>
  </subsection>
</section>
</body>
</document>
